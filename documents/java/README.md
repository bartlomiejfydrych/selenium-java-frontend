# â˜•Java â€” notatki

## ðŸ“‘Spis

- [Builder](#builder)
- [Plik konfiguracyjny â€” config.properties](#config)
- [Enum](#enum)
- [ENV â€” Zmienne Å›rodowiskowe](#env)
3. TODO: JavaFaker
   https://www.baeldung.com/java-faker

---

## Builder <a name="builder"></a>

**Linki:** (wiÄ™cej szukaÄ‡ pod hasÅ‚em `java builder`)  
https://devcave.pl/effective-java/wzorzec-projektowy-builder

Wzorzec projektowy Builder w Javie to konstrukcyjny wzorzec projektowy, ktÃ³ry pozwala na tworzenie skomplikowanych
obiektÃ³w krok po kroku. UÅ¼ywany jest do oddzielenia procesu tworzenia obiektu od jego reprezentacji, co umoÅ¼liwia
tworzenie rÃ³Å¼nych reprezentacji tego samego obiektu. Wzorzec ten jest szczegÃ³lnie przydatny, gdy obiekty majÄ… wiele
parametrÃ³w konfiguracyjnych lub gdy proces tworzenia obiektu jest zÅ‚oÅ¼ony.

1. Tworzymy w katalogu `main->java` package o nazwie `models`
2. W katalogu `models` tworzymy klasÄ™ np. `TableRow`, ktÃ³rÄ… bÄ™dziemy chcieli budowaÄ‡
3. Deklarujemy w niej:
   - Zmienne
   - Konstruktor
   - Gettery
   - KlasÄ™ `TableRowBuilder`:
     - Zmienne
     - Konstruktor dla kaÅ¼dej zmiennej
     - MetodÄ™ `build()`
    ```Java
    package tools_qa.models;
    
    public class TableRow {
    
        private String firstName;
        private String lastName;
        private String email;
        private String age;
        private String salary;
        private String department;
    
        public TableRow(String firstName, String lastName, String email, String age, String salary, String department) {
            this.firstName = firstName;
            this.lastName = lastName;
            this.email = email;
            this.age = age;
            this.salary = salary;
            this.department = department;
        }
    
        public String getAge() {
            return age;
        }
    
        public String getFirstName() {
            return firstName;
        }
    
        public String getLastName() {
            return lastName;
        }
    
        public String getEmail() {
            return email;
        }
    
        public String getSalary() {
            return salary;
        }
    
        public String getDepartment() {
            return department;
        }
    
        public static final class TableRowBuilder {
    
            private String firstName;
            private String lastName;
            private String email;
            private String age;
            private String salary;
            private String department;
    
            public TableRowBuilder firstName(String firstName) {
                this.firstName = firstName;
                return this;
            }
    
            public TableRowBuilder lastName(String lastName) {
                this.lastName = lastName;
                return this;
            }
    
            public TableRowBuilder email(String email) {
                this.email = email;
                return this;
            }
    
            public TableRowBuilder age(String age) {
                this.age = age;
                return this;
            }
    
            public TableRowBuilder salary(String salary) {
                this.salary = salary;
                return this;
            }
    
            public TableRowBuilder department(String department) {
                this.department = department;
                return this;
            }
    
            public TableRow build() {
                return new TableRow(firstName, lastName, email, age, salary, department);
            }
        }
    }
    ```
4. W katalogu `main->java->providers` tworzymy klasÄ™ `TableRowProvider`, ktÃ³ra bÄ™dzie budowaÄ‡ obiekt na podstawie naszego modelu
5. W niej przy pomocy `JavaFaker` moÅ¼emy budowaÄ‡ nasz obiekt
   - MoÅ¼na teÅ¼ coÅ› utworzyÄ‡ na sztywno
   - MoÅ¼na teÅ¼ tworzyÄ‡ coÅ› pobierajÄ…c dane z bazy danych
   ```Java
   package tools_qa.providers;

    import com.github.javafaker.Faker;
    import tools_qa.models.TableRow;
    
    public class TableRowProvider {
    
        public static TableRow getRandomTableRow() {
            Faker faker = new Faker();
            return new TableRow.TableRowBuilder()
                    .firstName(faker.name().firstName())
                    .lastName(faker.name().lastName())
                    .email(faker.internet().emailAddress())
                    .age(Integer.toString(faker.number().numberBetween(1, 99)))
                    .salary(Integer.toString(faker.number().numberBetween(2000, 999999999)))
                    .department(faker.job().field())
                    .build();
        }
    }
   ```
6. W klasie `Page` pod ktÃ³rÄ… robimy dany builder tworzymy metody uzupeÅ‚niajÄ…ce pola
7. NastÄ™pnie tworzymy metodÄ™, ktÃ³ra ma wypeÅ‚niÄ‡ caÅ‚y formularz uÅ¼ywajÄ…c stworzonych metod wraz z naszym modelem
    ```Java
    public WebTablesPage fillRowForm(TableRow tableRow) {
        writeFirstName(tableRow.getFirstName());
        writeLastName(tableRow.getLastName());
        writeEmail(tableRow.getEmail());
        writeAge(tableRow.getAge());
        writeSalary(tableRow.getSalary());
        writeDepartment(tableRow.getDepartment());
        clickSubmitButton();
        return this;
    }

    // Registration form

    public WebTablesPage writeFirstName(String firstName) {
        firstNameInput.clear();
        firstNameInput.sendKeys(firstName);
        return this;
    }

    public WebTablesPage writeLastName(String lastName) {
        lastNameInput.clear();
        lastNameInput.sendKeys(lastName);
        return this;
    }

    public WebTablesPage writeEmail(String email) {
        emailInput.clear();
        emailInput.sendKeys(email);
        return this;
    }

    public WebTablesPage writeAge(String age) {
        ageInput.clear();
        ageInput.sendKeys(age);
        return this;
    }

    public WebTablesPage writeSalary(String salary) {
        salaryInput.clear();
        salaryInput.sendKeys(salary);
        return this;
    }

    public WebTablesPage writeDepartment(String department) {
        departmentInput.clear();
        departmentInput.sendKeys(department);
        return this;
    }

    public WebTablesPage clickSubmitButton() {
        submitButton.click();
        return this;
    }
    ```
8. W teÅ›cie tworzymy obiekt z metody, ktÃ³ra generuje dla niego dane za pomocÄ… Fakera i uÅ¼ywamy jako argument
   ```Java
   TableRow addedTableRow = TableRowProvider.getRandomTableRow();
   webTablesPage.fillRowForm(addedTableRow);
   ```

PrzykÅ‚adowy kod jest w linku lub zastosowany tutaj:
- `java` -> `tools_qa` -> `models` -> `TableRow`
- `java` -> `tools_qa` -> `providers` -> `TableRowProvider`
- `java` -> `tools_qa` -> `pages` -> `normal` -> `elements_pages` -> `WebTablesPage`
- `test` -> `java` -> `tools_qa` -> `elements_tests` -> `WebTablesTest`

---

## Plik konfiguracyjny â€” config.properties <a name="config"></a>

**Linki:**  
https://www.baeldung.com/java-properties  
https://crunchify.com/java-properties-file-how-to-read-config-properties-values-in-java/  
https://mkyong.com/java/java-properties-file-examples/  
https://www.numpyninja.com/post/how-to-read-property-file-in-java

**WstÄ™p**  
Dane zwiÄ…zane z konfiguracjÄ…/ustawieniami projektu i jego Å›rodowiskiem powinny byÄ‡ przechowywane w osobnym pliku,
ktÃ³rego zmiany nie bÄ™dÄ… za kaÅ¼dym razem commitowane. Jest to szczegÃ³lnie waÅ¼ne, jeÅ¼eli potrzebujemy gdzieÅ› trzymaÄ‡ dane
dostÄ™powe takie jak loginy i hasÅ‚a, aby nie pojawiÅ‚y siÄ™ na repozytorium projektu.

**config.properties - Tworzenie pliku**  
W katalogu `resources` tworzymy plik o nazwie `config.properties`, ktÃ³rego zawartoÅ›Ä‡ moÅ¼e wyglÄ…daÄ‡ tak:
```Java
browser=chrome
isHeadless=false
appUrl=https://demoqa.com
defaultWait=10
```

**Config.java - Klasa czytajÄ…ca dane z pliku**  
W `java` dodajemy katalog `configuration`, a w nim tworzymy klasÄ™ `Config.java`.  
Deklarujemy w nim obiekt klasy `Properties`:
```Java
private static Properties properties;
```
NastÄ™pnie piszemy mechanizm, ktÃ³ry zapewni, Å¼e plik z config.properties bÄ™dzie wczytany tylko raz i pÃ³Åºniej re-uÅ¼ywany
do wszystkich metod, ktÃ³re pobierajÄ… informacje z tego pliku konfiguracyjnego:
```Java
static {
    properties = new Properties();
    try (InputStream inputStream = Config.class.getClassLoader().getResourceAsStream("tools_qa/config.properties")) {
        if (inputStream != null) {
            properties.load(inputStream);
        } else {
            throw new RuntimeException("Configuration file 'config.properties' not found");
        }
    } catch (IOException e) {
        throw new RuntimeException("Error loading configuration file", e);
    }
}
```
NastÄ™pnie metody pobierajÄ…ce konkretne dane z pliku konfiguracyjnego:
```Java
public static Browser getBrowser() {
    return Browser.valueOf(properties.getProperty("browser").trim().toUpperCase());
}

public static String getAppUrl() {
    return properties.getProperty("appUrl");
}

public static boolean isHeadless() {
    return Boolean.parseBoolean(properties.getProperty("isHeadless"));
}

public static int getDefaultWait() {
    return Integer.parseInt(properties.getProperty("defaultWait"));
}
```

**PrzykÅ‚ad uÅ¼ycia danych**  
```Java
public class TestBase {

    @BeforeEach
    public void setUp() {
        driver = DriverProvider.getDriver(Config.getBrowser());
        
------------
ANOTHER FILE
------------

public class UrlProvider {
    private static String baseUrl = Config.getAppUrl();

------------
ANOTHER FILE
------------

public class DriverProvider {

    public static WebDriver getDriver(Browser browser) {
        switch (browser) {
            case CHROME -> {
                ChromeOptions options = new ChromeOptions();
                options.addArguments("start-maximized");

                if (Config.isHeadless()) {
                    options.addArguments("--headless");
                }

------------
ANOTHER FILE
------------

public abstract class BasePage {

    private void initDriver(WebDriver driver) {
        defaultWait = new WebDriverWait(driver, Duration.ofSeconds(Config.getDefaultWait()));
```

## Enum <a name="enum"></a>

**Enum** w Javie to specjalny typ danych, ktÃ³ry pozwala na definiowanie zbioru staÅ‚ych wartoÅ›ci (enumeracji). KaÅ¼da
z tych staÅ‚ych jest unikalnÄ… instancjÄ… typu wyliczeniowego. Enumy sÄ… szczegÃ³lnie przydatne, gdy chcemy ograniczyÄ‡
moÅ¼liwe wartoÅ›ci dla zmiennej do skoÅ„czonego zbioru.

### Charakterystyka enumÃ³w

1. **Zdefiniowany zbiÃ³r wartoÅ›ci:** Enumy definiujÄ… zamkniÄ™ty zbiÃ³r wartoÅ›ci, co pozwala na ograniczenie zakresu
moÅ¼liwych wartoÅ›ci, jakie moÅ¼e przyjÄ…Ä‡ zmienna.
2. **Typ bezpieczny:** Enumy sÄ… typami bezpiecznymi w czasie kompilacji. Oznacza to, Å¼e kompilator sprawdza, czy
zmienne sÄ… przypisane do jednej z wartoÅ›ci enumu.
3. **MoÅ¼liwoÅ›Ä‡ dodawania metod:** Enumy w Javie mogÄ… zawieraÄ‡ metody, co umoÅ¼liwia dodawanie zachowaÅ„ specyficznych
dla poszczegÃ³lnych wartoÅ›ci enumu.
4. **MoÅ¼liwoÅ›Ä‡ implementacji interfejsÃ³w:** Enumy mogÄ… implementowaÄ‡ interfejsy, co pozwala na ich integracjÄ™
w szerszych strukturach kodu.

### Definiowanie i uÅ¼ywanie enumÃ³w

Oto przykÅ‚ad definicji enumu w Javie:
```Java
public enum Day {
    MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY
}
```

### UÅ¼ycie enumu

```Java
public class Main {
    public static void main(String[] args) {
        Day today = Day.MONDAY;

        switch (today) {
            case MONDAY:
                System.out.println("Today is Monday.");
                break;
            case TUESDAY:
                System.out.println("Today is Tuesday.");
                break;
            // Dodaj pozostaÅ‚e dni tygodnia
            default:
                System.out.println("Today is another day.");
                break;
        }
    }
}
```

### Enumy z polami i metodami

Enumy mogÄ… mieÄ‡ wÅ‚asne pola, konstruktory i metody. Oto bardziej zaawansowany przykÅ‚ad:
```Java
public enum Planet {
    MERCURY(3.303e+23, 2.4397e6),
    VENUS(4.869e+24, 6.0518e6),
    EARTH(5.976e+24, 6.37814e6),
    MARS(6.421e+23, 3.3972e6),
    JUPITER(1.9e+27, 7.1492e7),
    SATURN(5.688e+26, 6.0268e7),
    URANUS(8.686e+25, 2.5559e7),
    NEPTUNE(1.024e+26, 2.4746e7);

    private final double mass;   // w kilogramach
    private final double radius; // w metrach

    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    }

    public double getMass() {
        return mass;
    }

    public double getRadius() {
        return radius;
    }

    // Uniwersalna staÅ‚a grawitacyjna w m^3 / kg s^2
    public static final double G = 6.67300E-11;

    // Powierzchniowa grawitacja dla planety
    public double surfaceGravity() {
        return G * mass / (radius * radius);
    }

    // Waga na planecie
    public double surfaceWeight(double otherMass) {
        return otherMass * surfaceGravity();
    }

    public static void main(String[] args) {
        double earthWeight = 175;
        double mass = earthWeight / EARTH.surfaceGravity();
        for (Planet p : Planet.values()) {
            System.out.printf("Your weight on %s is %f%n", p, p.surfaceWeight(mass));
        }
    }
}
```

W powyÅ¼szym przykÅ‚adzie enum `Planet` zawiera pola `mass` i `radius`, ktÃ³re sÄ… inicjalizowane w konstruktorze. Posiada
rÃ³wnieÅ¼ metody do obliczania powierzchniowej grawitacji i wagi na poszczegÃ³lnych planetach.

---

## ENV â€” Zmienne Å›rodowiskowe <a name="env"></a>

Do ustawiania i zarzÄ…dzania zmiennymi Å›rodowiskowymi moÅ¼emy uÅ¼yÄ‡ biblioteki `dotenv-java`.

**Nazwa:**  
`Dotenv Java`

**Link do GitHub (dokumentacja):**  
https://github.com/cdimascio/dotenv-java

**Link do Maven:**  
https://mvnrepository.com/artifact/io.github.cdimascio/dotenv-java

1. Dodajemy jÄ… w Maven (oczywiÅ›cie aktualnÄ… wersjÄ™, poniÅ¼ej tylko przykÅ‚ad):
    ```maven
    <!-- https://mvnrepository.com/artifact/io.github.cdimascio/dotenv-java -->
    <dependency>
        <groupId>io.github.cdimascio</groupId>
        <artifactId>dotenv-java</artifactId>
        <version>3.0.2</version>
    </dependency>
    ```
2. Tworzymy plik `.env` w gÅ‚Ã³wnym katalogu projektu lub gdzie chcemy np.:
    ```
    USERNAME=yourUsername
    PASSWORD=yourPassword
    ```
3. Wczytujemy zmienne Å›rodowiskowe z pliku `.env`:
    ```java
    import io.github.cdimascio.dotenv.Dotenv;
    
    public class EnvExample {
        public static void main(String[] args) {
            Dotenv dotenv = Dotenv.load();
            String username = dotenv.get("USERNAME");
            String password = dotenv.get("PASSWORD");
    
            System.out.println("Username: " + username);
            System.out.println("Password: " + password);
        }
    }
    ```
